# ファイル修正を検知して環境別ディレクトリにコピーするツール
## ■言語・ツール・開発環境
###### Go/Atom
## ■修正履歴
###### 2016/08/30 公開
###### 2016/10/10 再構成
## ■紹介
###### メールが増えたりするたびに環境別にプロパティファイルを量産（そして一部だけ変更）するのが面倒だったので、指定のファイルの修正を検知して勝手に指定のディレクトリ群にコピー（して、指定の内容だけ文字列置換）するツールを作りました。
###### ※「そもそもメールってそんなに増えるんだっけ？」とか「コピーするだけならコマンドプロンプトでも・・・。」とか「頻度的に１回しかないやらないだろうから、ポーリングする意味ないでしょう。」とか、突っ込みどころは満載です。
###### ★あいかわらず、バグつぶし足りてないと思います・・・。
## ■作成言語
###### Go です。が、Go ならではのゴルーチンは使ってません。
###### go build xxxx.go って打つだけで Exe ファイル作ってくれるのが嬉しかったので使ってみました。
###### ほぼワンライナーでポート待ち受けサーバプロセス作れたり、多値を返す関数などは最近の言語では見られる特徴ですが、クラスという概念がない（Cで言う構造体を使う）、そして関数を使う時には、構造体をレシーバとするというのは、Javaから始めた人からすると新鮮。
###### 開発に使ったエディタは Atom ですが、Go 用のプラグインを入れると、恐ろしくコード書きやすいです。
## ■使い方
###### 1. WorkGoCopyByEachEnv.zip を解凍して config.txt　の中を自分の環境に合わせたパスなどに変更してください。
###### 　（コピーが必要なプロパティファイルが無いなら、そもそも、このプログラムを動かす意味はないです。）
###### 　※指定のコピー元ファイルがないとか、単純に落ちます。
###### 2. cmd.exe（※）叩いてください。（プロンプト開きます）　※WindowsOS(64bit)用のみ用意（他の環境の場合は要ビルド）
###### 3. コピー元ファイルを作成（ないし、修正）してください。
###### 4. ブラウザ開いて、「http://localhost:7109/gopy/start」と打ってください。
###### 　※一回叩いたらブラウザは落としてもいいです。（状況はコンソールが吐きます。）
###### 5. 指定のディレクトリにコピー（適宜文字列置換）されていることを確認してください。
###### 　※以後、１０秒置きにポーリングしているので、コピー元を修正したら、コピー先に反映されます。
###### 6. 止めたくなったら、ブラウザ開いて、「http://localhost:7109/gopy/end」と打ってください。
###### 　※コンソール上で Ctrl + C でもいいですけど。
###### ※制約もろもろ※
###### 　・置換できるのは１事例です。（config.txt の事例を見るとなんとなくわかると思いますが）
###### 　・なぜかは調べてないですが、置換したい内容に「=」を含めるとうまくいきません。なので「key=value」と書くとうまくいきません。
## ■その他
###### node.js とのパフォーマンス比較記事がおもしろいです。
###### http://postd.cc/the-way-of-the-gopher/
